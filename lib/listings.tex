% Highlighted code listings, https://ctan.org/pkg/minted
%
% This requires pygments.
%
%     pip install Pygments
%     cd /Library/TeX/texbin
%     sudo ln -s `which pygmentize` pygmentize
%     sudo tlmgr install fvextra
%     sudo tlmgr update minted
%

% https://tex.stackexchange.com/a/88620/70789
\usepackage{pdftexcmds}
\makeatletter
\ifcase\pdf@shellescape
  \usepackage[frozencache]{minted}\or % no shell escape
  %\usepackage[outputdir=./build]{minted}\or % unrestricted shell escape
  \usepackage[finalizecache]{minted}\or % unrestricted shell escape
  \usepackage[frozencache]{minted}\fi % restricted shell escape
\makeatother

\setminted{
  tabsize=2, linenos, breaklines, breakafter=/_, autogobble, breakautoindent, frame=lines, framesep=2mm, fontsize=\footnotesize
}

\newenvironment{python}{\minted{python}}{\endminted}
\newcommand\pythoninput[1]{\inputminted{python}{#1}}

\newenvironment{ccode}{\minted{c}}{\endminted}

\setminted[bash]{
  linenos=false
}

\newenvironment{bash}{\minted{bash}}{\endminted}